<%= turbo_frame_tag :product_details do %>
  <%= form_with model: [:admin, @product], data: { controller: "form-state", turbo_frame: :product_details } do |f| %>
    <div class="card">
      <%= render 'aypex/admin/shared/card_header', title: I18n.t('aypex.admin.details') %>

      <div class="card-body">
        <%= f.field_container :name do %>
          <%= f.text_field :name, required: true %>
          <%= f.label :name, raw(I18n.t("aypex.admin.name") + required_span_tag) %>
        <% end %>

        <%= f.field_container :slug do %>
          <%= f.text_field :slug, required: true %>
          <%= f.label :slug, raw(I18n.t("aypex.admin.slug") + required_span_tag) %>
        <% end %>

        <% if product_wysiwyg_editor_enabled? %>
          <%= f.hidden_field :content, id: f.field_id(:content), value: f.object.content.try(:to_trix_html) || f.object.content %>
          <rhino-editor input="<%= f.field_id(:content) %>"
                        data-blob-url-template="<%= Rails.application.routes.url_helpers.rails_service_blob_url(":signed_id", ":filename", only_path: true) %>"
                        data-direct-upload-url="<%= Rails.application.routes.url_helpers.rails_direct_uploads_url only_path: true %>">
          </rhino-editor>
        <% else %>
          <%= f.field_container :description do %>
            <%= f.label :description, I18n.t("aypex.admin.description") %>
            <%= f.text_area :description, {rows: 15, form_state_target: "watch" } %>
          <% end %>
        <% end %>
      </div>
    </div>
  <% end %>

  <%= flash_alert(flash, :product_details) %>
<% end %>
